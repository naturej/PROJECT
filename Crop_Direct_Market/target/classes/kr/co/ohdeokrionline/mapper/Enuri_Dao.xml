<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.ohdeokrionline.model.dao.Enuri_Dao">
	<!-- 판매글 아이디 가져오기 -->
	<!-- salboard 완성된 이후
	<select id="bo_id" parameterType="java.util.HashMap" >
	SELECT DISTINCT(S.USER_ID)
	FROM SALBOARD S
	JOIN ENURI E
	ON S.BO_NUM = E.BO_NUM
	WHERE E.BO_NUM=#{bo_num}
	</select>
	 -->
	<!-- 판매글 제목 가져오기-->
	<!-- salboard 완성된 이후
	<select id="bo_subject" parameterType="java.util.HashMap" >
	SELECT DISTINCT(S.BO_SUBJECT)
	FROM SALBOARD S
	JOIN ENURI E
	ON S.BO_NUM = E.BO_NUM
	WHERE E.BO_NUM=#{bo_num}
	</select>
	 -->
	<!-- 에누리 목록 -->
	<select id="enuList" resultType="kr.co.ohdeokrionline.model.vo.Enuri_DTO">
		SELECT * FROM ENURI ORDER BY ENU_IDX DESC
	</select>
	
	<!-- 에누리 상세보기 -->
	<select id="enuDetail" resultType="kr.co.ohdeokrionline.model.vo.Enuri_DTO">
		SELECT * FROM ENURI WHERE ENU_IDX=#{enu_idx}
	</select>
	
	<!-- 에누리 신청 -->
	<insert id="insertEnuri" parameterType="kr.co.ohdeokrionline.model.vo.Enuri_DTO"><!-- 테스트용 상세보기 쿼리 -->
		INSERT INTO ENURI(BO_NUM, USER_ID,ENU_CONTENT, ENU_QUAN, ENU_PRICE, ENU_IDX) 
			VALUES(#{bo_num} ,	#{user_id} ,#{enu_content} ,#{enu_quan} ,#{enu_price} ,	ENU_SEQ.NEXTVAL )
	</insert>
	
	<!-- 에누리 수락 (1) -->
	<update id="yesEnuri">
		UPDATE ENURI SET ENU_CONFIRM=1 WHERE ENU_IDX=#{enu_idx}
	</update>
	
	<!-- 에누리 거절 (2) -->
	<update id="noEnuri">
		UPDATE ENURI SET ENU_CONFIRM=2 WHERE ENU_IDX=#{enu_idx}
	</update>
	
	<!-- 장바구니에 넣기 -->
</mapper>
