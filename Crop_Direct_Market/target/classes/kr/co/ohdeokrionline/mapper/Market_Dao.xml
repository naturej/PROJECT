<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="kr.co.ohdeokrionline.model.dao.Market_Dao">
	
	
 <select id="getCount" resultType="Integer">
  SELECT COUNT(*) FROM MARKET
</select>

    <select id="getMarketlist" parameterType="Integer" resultType="kr.co.ohdeokrionline.model.vo.Market_DTO">
     SELECT * FROM
               (SELECT ROWNUM NUM, N.* 
            	   FROM 
               		 (SELECT * 
                       FROM MARKET ORDER BY WRITEDATE DESC) N
                )WHERE NUM BETWEEN 1 + (#{page}-1)*8 AND 8 + (#{page}-1)*8
    </select>
 
 	 <select id="detailmarket" resultType="kr.co.ohdeokrionline.model.vo.Market_DTO">
     SELECT * FROM MARKET WHERE MAR_ID=#{mar_id}
     </select>
        
    
    <insert id="insert" parameterType="kr.co.ohdeokrionline.model.vo.Market_DTO">
      INSERT INTO MARKET(MAR_ID,MAR_DATE,MAR_LOCATION,WRITEDATE,MAR_TIME,MAR_PHOTO,MAR_CONTENT,MAR_MAXSHOP,MAR_SUBJECT)
      VALUES(MAR_Seq.nextval,#{mar_date},#{mar_location},SYSDATE,#{mar_time},#{mar_photo},#{mar_content},#{mar_maxshop},#{mar_subject})   
     </insert>
     
	    <!--   U update   
	   <update id="update" >
	       UPDATE BOARD SET SUBJECT=#{subject}, CONTENT=#{content}, 
	                      FILENAME=#{filename ,jdbcType=VARCHAR} WHERE IDX=#{idx}
	    </update>
		-->
	<!--   D delete   -->
		<delete id="delete" parameterType="STRING">
		      DELETE MARKET WHERE MAR_ID=#{mar_id}
		</delete>  
		   
</mapper>
